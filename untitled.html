<html>
	<head>
		<title>
			MyHive
		</title>
		<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
		<script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.12.1/jquery-ui.min.js"></script>
		<link rel="stylesheet" type="text/css" href="mystyle.css">
	</head>
	<body>
		<div id="demo2_viewport">
 			<div id="demo2_wall"></div>
		</div>
		<div id="logo"></div>
		<div id="close"></div>
		

		<div id="p1" class="project"></div>
		<div id="p20" class="project"></div>
		<div id="p25" class="project"></div>
		<div id="p32" class="project"></div>
		<div id="p4" class="project"></div>
	</body>
	<script src="jquery.infinitedrag.js"></script>
	<script type="text/javascript">
	  $(document).ready(function() {
	    /* //allows editing of position marker
	    var edit = function($element) {
	      // Create the text input.
	      var text = $element.text();
	      $input = $('<input type="text" />').val(text);
	      
	      // Create the from.
	      $editor = $("<form></form>").
	        append($input).
	        appendTo($element.empty());
	        
	      // Focus on the input.
	      $input.focus();
	      
	      var save = function () {
	        var val = $editor.children("input").val();
	        $element.html(val);
	        return false;
	      }
	      
	      $input.blur(save);
	      $editor.submit(save);
	    };
	    */
	    var tile_options = {
	      width: 300,
	      height: 300,
	      start_col: 1,
	      start_row: 1,
	      oncreate: function($element, col, row) {
	        /*$('<div class="_content"></div>').
	          text(col + "," + row).
	          appendTo($element);
			*/
	          //coloring all aavailable projects
	          $element.css("background",color(col,row));

	          $("#panel").css({"width":"300","height":"300"});


	          $element.dblclick(function(e) {
	          	//$(this).offset();
	            //console.log("double clicked"+ $(this).offset().top);
	           	$("#close").addClass("show");
	           	open_panel(col,row,this);
	          });
	      }
	    };




	    function open_panel(col,row,e)
	    {
	    	var project_no= 15*(row-1)+col;
	    	console.log(project_no);
	    	if($("#p"+project_no).length)
	    	{	
	    		$("#p"+project_no).css({"top":$(e).offset().top,"left":$(e).offset().left});
	           	$("#p"+project_no).fadeIn();
	    		$("#p"+project_no).addClass("open");
	    	}

	    }



	    function color(col, row)
	    {
	    	var project_no= 15*(row-1)+col;

	    	if($("#p"+project_no).length)
	    	{
	    		return $("#p"+project_no).css("background");
	    		console.log(project_no);
	    	}
	    	else{
	    		return "#000";
	    	}
	    }

	    //close
	    $("#close").click(function(e){
	    	$(".project").removeClass("open");
	    	$(".project").css({"top":"","left":""});
	    	$(this).removeClass("show");
	    });
	    
	    jQuery.infinitedrag("#demo2_wall", {}, tile_options);
	  });


	</script>
</html>